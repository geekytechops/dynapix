<html>

    <head>
        <title>Media | Dynapix</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
        <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">
        <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.css" />
        <link rel="stylesheet" href="css/style.css">
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
        <!-- Owl Carousel CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
<style>
    .campaign-block button{
        font-size:12px;
    }
    .modal{
        background-color: #000000a1;
    }
    /* Ensure modal content doesn't cause overflow */
.modal-dialog {
    max-width: 90%; /* Set a max width for the modal */
    margin: auto; /* Center the modal */
    overflow: hidden; /* Hide overflow */
}

/* Prevent both vertical and horizontal scrollbars */
.modal-content {
    width: 100%;
    height: auto; /* Adjust the height to the content */
    overflow: hidden; /* Prevent overflow */
}

/* Disable scroll when modal is open */
body.modal-open {
    overflow: hidden; /* Disable body scrolling */
}

/* Optional: For responsive modal */
@media (max-width: 768px) {
    .modal-dialog {
        max-width: 100%; /* Allow modal to take full width on small screens */
    }
}

    /* Adjust the close button styling */
.modal-header .close {
    font-size: 30px;
    color: #000;
    opacity: 1;
}

.modal-header .close:hover,
.modal-header .close:focus {
    color: #f00; /* Change color on hover/focus */
    text-decoration: none;
    opacity: 1;
}

/* Disable scroll when the modal is open */
body.modal-open {
    overflow: hidden;
}

/* Optional: Add some margin for better modal visibility */
.modal-dialog {
    margin-top: 100px; /* Add top margin to make the modal more centered */
    max-width: 80%; /* Adjust modal width */
}

    /* Style the Owl Carousel Navigation Arrows */
.owl-carousel .owl-nav .owl-prev, .owl-carousel .owl-nav .owl-next {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent background */
    color: white;
    padding: 10px;
    font-size: 20px;
    border-radius: 50%; /* Rounded edges */
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); /* Add shadow for effect */
    z-index: 10; /* Ensure the arrows are above the images */
}

/* Position the left arrow */
.owl-carousel .owl-nav .owl-prev {
    left: -25px; /* Adjust as per your layout */
}

/* Position the right arrow */
.owl-carousel .owl-nav .owl-next {
    right: -25px; /* Adjust as per your layout */
}

/* Add hover effect for arrows */
.owl-carousel .owl-nav .owl-prev:hover, .owl-carousel .owl-nav .owl-next:hover {
    background-color: rgba(0, 0, 0, 0.8); /* Darker background on hover */
    cursor: pointer;
}
/* Ensure all carousel images have the same height and width */
.owl-carousel .owl-item img {
    width: 100%; /* Ensure the image takes the full width of the container */
    height: 300px; /* Set a fixed height for all images */
    object-fit: cover; /* Cover the container without distorting the image */
    object-position: center; /* Center the image within the container */
    display: block; /* Remove any extra space below the image */
}

/* Optional: Adjust the height for smaller screens (Mobile responsiveness) */
@media (max-width: 768px) {
    .owl-carousel .owl-item img {
        height: 200px; /* Adjust height for mobile screens */
    }
}


/* Optionally, style for smaller screens (Mobile responsiveness) */
@media (max-width: 768px) {
    .owl-carousel .owl-nav .owl-prev, .owl-carousel .owl-nav .owl-next {
        font-size: 16px; /* Smaller font size on mobile */
        padding: 8px; /* Adjust padding for smaller size */
    }
}

        #carouselModal .modal-dialog {
        max-width: 80%;  /* Adjust the width of the modal */
        margin: 0 auto; /* Center the modal vertically and horizontally */
    }

    /* Set max width and height for carousel and images */
    #carouselModal .modal-body .owl-carousel {
        max-width: 100%;  /* Ensure the carousel doesn't exceed the modal's width */
        max-height: 400px;  /* Limit the carousel height */
    }

    #carouselModal .modal-body .owl-carousel .item img {
        max-width: 100%;  /* Ensure images scale to fit the container */
        max-height: 100%;  /* Ensure images scale to fit the container */
        object-fit: cover; /* Maintain aspect ratio */
    }
</style>
    </head>
    
    <body class="dark">
       
       <header>
           <div class="container">
               <div class="row">
                  <div class="col-12">
                      <div class="row">
                          <div class="col-5 col-lg-2">
                               <a href="index.html" class="logo"><img src="images/dynapix-logo-dark.png"></a>
                           </div>
                           <div class="col-7 col-lg-10">
                               <ul class="main-menu d-none d-lg-flex">
                                   <li><a href="index.html" class="menuitem">Home</a></li>
                                   <li><a href="about.html" class="menuitem">About Us</a></li>
                                   <li><a href="media.html" class="menuitem">Media</a></li>
                                   <li><a href="careers.html" class="menuitem">Careers</a></li>
                                   <li><a href="contact.html" class="menuitem">Contact Us</a></li>
                                   <li><a href="brand-stories" class="menuitem">Brand Stories</a></li>
                                   <a href="tel:9100200100"><span class="btn rg-btn"><i class="fas fa-phone"></i> Call Now</span></a>
                               </ul>
                               <div class="d-lg-none mobmenu">
                                   <span class="menuicon" data-bs-toggle="modal" data-bs-target="#mobilemenu"><i class="fas fa-bars"></i></span>
                                   <a href="tel:9100200100"><span class="btn rg-btn"><i class="fas fa-phone"></i> Call Now</span></a>
                               </div>
                           </div>
                      </div>
                  </div>
                   
               </div>
           </div>
       </header>
        
        
        <section class="pt-5 pb-4 mb-3">
            <div class="container">
                <div class="row">
                                      
                    <% if (mallData.length > 0) { %>
                        <% mallData.forEach(mallData => { %>
                        <div class="col-12 col-md-6 col-lg-4 position-relative campaign-block">
                            <a href="javascript:void(0)" class="genre" onclick="getSlider('<%= mallData.campaign_type %>')">
                                <img src="../<%= mallData.campaign_main_image || 'images/default.jpg' %>" alt="Image for <%= mallData.campaign_main_image %>" class="img-fluid">
                                <h2 class="title"><%= mallData.campaign_type %></h2>
                            </a>
                    
                            <% if (isLoggedin) { %>
                                <button 
                                    class="btn btn-primary position-absolute edit-button" 
                                    data-id="<%= mallData.campaign_id %>"
                                    style="top: 10px; left: 10px;"
                                    onclick="editCampaign('<%= mallData.campaign_id %>', event)">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                                <button 
                                    class="btn btn-danger position-absolute delete-button" 
                                    data-id="<%= mallData.campaign_id %>"
                                    style="top: 10px; right: 10px;"
                                    onclick="deleteCampaign('<%= mallData.campaign_id %>', event)">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            <% } %>
                        </div>
                        <% }); %>
                    <% } %>
                    
                </div>
            </div>
        </section>

        
        <footer>
            <div class="container">
                <div class="row">
                   <div class="col-12">
                       <div class="row">
                           <div class="col-12 col-lg-4">
                                <img src="images/logo-white.png" class="logo">
                                <p>Dynapix provides digital advertising solutions to businesses. We use the latest technology to deliver dynamic, engaging content to consumers on-the-go.</p>
                            </div>
                            <div class="col-6 col-md-4 col-lg-2">
                                <div class="title">Quick Links</div>
                                <div class="footlinks">
                                    <a href="index.html">Home</a>
                                    <a href="about.html">About Us</a>
                                    <a href="media.html">Media</a>
                                    <a href="careers.html">Careers</a>
                                    <a href="contact.html">Contact Us</a>
                                    <a href="brand-stories">Brand Stories</a>
                                </div>
                            </div>
                            <div class="col-6 col-md-4 col-lg-2">
                                <div class="title">Policies</div>
                                <div class="footlinks">
                                    <a>Privacy Policy</a>
                                    <a>Terms & Conditions</a>
                                </div>
                            </div>
                            <div class="col-12 col-md-4 col-lg-3">
                                <div class="title">Get in Touch</div>
                                <div class="addrwrap mb-3">
                                    <span>
                                        <strong class="d-block mb-1">Dynapix Advertising</strong>
                                        1st Floor, Modern Profound Tech Park, Sy. No. 12, Whitefield Road, Kondapur, Telangana - 500084
                                   </span>
                                </div>
                                <div class="addrwrap">
                                    <i class="fas fa-phone"></i>
                                    <span>9100200100</span>
                                </div>
                                <div class="addrwrap">
                                    <i class="fas fa-envelope"></i>
                                    <span>info@dynapix.com</span>
                                </div>
                            </div>
                            <div class="col-12 text-center">Copyright &copy;2024 Dynapix. <span class="d-inline-block">All Rights Reserved.</span></div>
                       </div>
                   </div>
                </div>
            </div>
        </footer>

        <div id="carouselModal" class="modal" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Campaign Images</h5>
                        <button type="button" class="close text-light" data-dismiss="modal" aria-label="Close" onclick="closeModal()">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <!-- Owl Carousel -->
                        <div class="owl-carousel">
                            <!-- Dynamic images will be inserted here -->
                        </div>
                        <div class="slider-description">
                            <h2 class="slider-title">Campaign Media</h2>
                            <p class="slider-description-text">Explore our latest media campaigns from various categories, including malls, theatres, and fuel stations.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="modal" id="mobilemenu" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="termsLabel">
           <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-body">
                     <div class="mobmainmenu">
                         <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close" id="btnclose"><i class="fas fa-times"></i></button>
                         <ul class="mobmenulist">
                           <li><a href="index.html" class="menuiitem">Home</a></li>
                           <li><a href="about.html" class="menuiitem">About Us</a></li>
                           <li><a href="media.html" class="menuiitem">Media</a></li>
                           <li><a href="careers.html" class="menuiitem">Careers</a></li>
                           <li><a href="contact.html" class="menuiitem">Contact Us</a></li>
                           <li><a class="menuiitem">Brand Stories</a></li>
                         </ul>
                     </div>
                  </div>
               </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
        <script>
        
             $(document).on("click",".menuiitem", function(){
                $("#btnclose").trigger("click");
            })

            const getSlider = (campaignType) => {
        $.ajax({
            type: 'get',
            url: '/getCampaignDetails/' + campaignType,
            success: function (data) {
                console.log(data);
                const images = data.mall.images;  // Assuming the data structure has images property
                
                // Clear any existing carousel content
                $('#carouselModal .modal-body .owl-carousel').html('');

                $('#carouselModal .slider-title').html(data.mall.campaignDetails[0].campaign_title);
                $('#carouselModal .slider-description-text').html(data.mall.campaignDetails[0].campaign_desc);
                // Prepare the new carousel content
                let carouselContent = '';
                images.forEach(image => {
                    carouselContent += `<div class="item"><img src="${image}" alt="Image"></div>`;
                });

                // Inject the new carousel content into the modal
                $('#carouselModal .modal-body .owl-carousel').html(carouselContent);

                // Destroy any existing Owl Carousel instance before initializing again
                $('#carouselModal .owl-carousel').owlCarousel('destroy');

                // Re-initialize the Owl Carousel with the new images
                $('#carouselModal .owl-carousel').owlCarousel({
                    loop: true,
                    margin: 10,
                    nav: true,
                    items: 3,
                    autoplay: true,  // Optional: Auto play images
                    autoplayTimeout: 5000, // Timeout for autoplay
                    autoplayHoverPause: true  // Pause autoplay on hover
                });

                // Show the modal
                $('#carouselModal').modal('show');
            }
        });
    }

    function closeModal() {
    $('#carouselModal').modal('hide');
    $('body').removeClass('modal-open'); // Enable body scroll again
}
const editCampaign = (campaignId) =>{
    window.location.href="/admin/edit-brandstories/"+campaignId;
}
const deleteCampaign = (mallId) =>{

    if (confirm('Are you sure you want to delete this media?')) {
        $.ajax({
            url: '/admin/delete-campaign',
            type: 'POST',
            data: { id: mallId },
            success: function () {
                alert('Media deleted successfully!');
                window.location.href = '/brand-stories'; 
            },
            error: function (xhr) {
                alert('Failed to delete media: ' + xhr.responseText);
            },
        });
    }
};

        </script>
        
    </body>

</html>